<!DOCTYPE html>
<html>
<head>
  <title>LINGUIST 245B Study</title>
  <!-- Load JsPsych -->
  <script src="https://unpkg.com/jspsych@7.3.3"></script>
  <script src="https://unpkg.com/@jspsych/plugin-instructions@1.1.4"></script>
  <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.3"></script>
  <link href="https://unpkg.com/jspsych@7.3.3/css/jspsych.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <script>
    // Initialize jsPsych
    const jsPsych = initJsPsych({
        show_progress_bar: true,
        auto_update_progress_bar: true,
        on_finish: function() {
        // Displays data at the end of the experiment
        // Better to comment out for the real experiment so participants aren't confused
        jsPsych.data.displayData();
      }
    });

    // We will store each trial in a list called timeline 
    const timeline = [];

    // Instructions
    const instructions = {
      type: jsPsychInstructions,
      key_forward: ' ',
      pages: ['<div class="content"><h2>Thank you for participating in this study.</h2>' + '<p>For this portion of the experiment, you will be shown a face and will listen to a sentence. After the full sentence is played, type what you heard to the best of your ability. Hit the </strong>SPACEBAR<strong> to begin.</p>']
    
    };
    timeline.push(instructions);

    // Function to create trials for a sentence
    function createReadingTrials(sentence, sentenceNum) {
      const trials = [];
      
      //Trial showing a fixation cross briefly, before each sentence 
      const fixationCross = {
        type: jsPsychHtmlKeyboardResponse,
        choices: 'NO_KEYS',
        stimulus: '+',
        trial_duration: 100,
        css_classes: ['fixation']
      }

      //Trial for when they are ready to move on to the next question
      const pressRightArrow = {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: '<p>Press the right arrow when you are done transcribing the sentence.</p>',
        choices: ['rightarrow']
      }
      timeline.push(pressRightArrow);
      
      return trials;
    }

    // Nice to tell participants they are done, thank you, etc
    const completion = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: '<div class="content"><h2>Thank you!</h2>' +
                '<p>The experiment is now complete.</p>',
      choices: 'NO_KEYS'
    };
    timeline.push(completion);

    // This line actually runs the experiment 
    jsPsych.run(timeline);
  </script>
</body>
</html>